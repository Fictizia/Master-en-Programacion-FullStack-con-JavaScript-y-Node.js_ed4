<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: script2.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: script2.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>
/**
 *  Metodo para unir dos cadenas
 * 
 *  @example
 *  union("hola","madrid")
 *  Devuelve -> "hola madrid"
 * 
 *  @param {string} cadena1 Primera cadena
 *  @param {string} cadena2 Segunda cadena
 *  @returns {string} Devuelve la cadena concatenada
 * 
 */
function union(cadena1,cadena2){
    return cadena1+" "+cadena2;
}

/**
 *  Metodo para devolver datos del polen a raÃ­z de una URL
 *  @param {string} url La url para hacer la peticion AJAX
 *  @example peticionPolen("url_datos_polen.html")
 * 
 */
function peticionPolen(url) {
    var xmlHttp = new XMLHttpRequest();

    xmlHttp.onreadystatechange = function() {
        
        if (xmlHttp.readyState === 4 &amp;&amp; xmlHttp.status === 200) {
            var respuesta = JSON.parse(xmlHttp.responseText);
            console.info(respuesta);
            // Mostrar en el DOM
            /*
            var resultado = document.createElement("p");
            resultado.setAttribute("id","resultado2");
            resultado.innerHTML = respuesta[0].mediciones.Aliso.fecha;
            document.body.appendChild(resultado);
            */

            // Mostrar todos los datos
            respuesta.forEach(function(estacion){ // Arganzuela, Salamanca, Ciudad Universitaria
                var div_estacion = document.createElement("div");
                div_estacion.setAttribute("id",estacion.id);
                var nombre = document.createElement("h2");
                
                nombre.innerHTML = estacion.name;
                div_estacion.appendChild(nombre); // div --> h2
                document.getElementById("mediciones").appendChild(div_estacion); // mediciones ->div --> h2
                

                var lista = document.createElement("ul");
                // Rellenar lista
                for (medida in estacion.mediciones){
                    var medicion = document.createElement("li");

                   medicion.innerHTML = medida+": Fecha:"+estacion.mediciones[medida].fecha+", Valor:"+estacion.mediciones[medida].valor;

                    console.log(medicion);

                    lista.appendChild(medicion);// Juntar UL con LIs
                }

                div_estacion.appendChild(lista);
            });




        } else if (xmlHttp.readyState === 4 &amp;&amp; xmlHttp.status === 404) {
            console.error("ERROR! 404");
            console.info(JSON.parse(xmlHttp.responseText));
        }
    };
    xmlHttp.open("GET", url, true);
    xmlHttp.send();
}

document.getElementById("boton2").addEventListener("click",function(){
    peticionPolen("http://airemad.com/api/v1/pollen")
});</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#peticionAjax">peticionAjax</a></li><li><a href="global.html#peticionPolen">peticionPolen</a></li><li><a href="global.html#union">union</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.3</a> on Wed Dec 11 2019 16:56:11 GMT+0100 (GMT+01:00)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
